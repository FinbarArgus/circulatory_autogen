<?xml version='1.0' encoding='UTF-8'?>
<model name="modules" xmlns="http://www.cellml.org/cellml/1.1#" xmlns:cellml="http://www.cellml.org/cellml/1.1#">
    <component name="Lymph_vessel_blind">
        <!-- Constitutive parameters-->
        <variable name="t" public_interface="in" units="second"/>
        <variable name="mu" public_interface="in" units="Js_per_m3"/>
        <variable name="L" public_interface="in" units="meter"/>
        <variable name="D" public_interface="out" units="meter"/>
        <!--var D0: meter {pub: in};-->
        <variable name="q_0" public_interface="in" units="m3"/>
        <variable name="C_L" public_interface="in" units="m6_per_J"/>
        <variable name="R_pvb" public_interface="out" units="Js_per_m6"/>
        <variable name="R_p" public_interface="out" units="Js_per_m6"/>
        <variable name="delT" public_interface="in" units="second"/>
        <variable name="q_m_init" public_interface="in" units="m3"/>
        <variable initial_value="q_m_init" name="q_m" public_interface="out" units="m3"/>
        <!--var a_f: dimensionless {pub: in};-->
        <!--var R_sv: Js_per_m6 {pub: in};-->
        <!--State Variables-->
        <variable name="v_p" public_interface="out" units="m3_per_s"/>
        <!-- var q_m: m3 {init: 1e-14, pub: out};-->
        <!--var v1: m3_per_s {pub: in};-->
        <variable initial_value="2e-16" name="v_w" public_interface="out" units="m3_per_s"/>
        <variable name="u_w" public_interface="in" units="J_per_m3"/>
        <variable name="u_m" public_interface="out" units="J_per_m3"/>
        <variable name="u_out" public_interface="in" units="J_per_m3"/>
        <!--var R_svc: js_per_m6 ;-->
        <!-- Constitutive Relations-->
        <variable name="a" public_interface="in" units="m3_per_J"/>
        <!--var a: m3_per_J {init: 7.8867e-4};
 var N: dimensionless {pub: in};
var K_af: J_per_m2 {pub: in};
 var u_af: J_per_m3 {pub: out}; -->
        <variable name="b" public_interface="in" units="m3_per_J"/>
        <variable name="R_pv0" public_interface="in" units="J_per_m4_s"/>
        <variable name="d_ec" public_interface="in" units="meter"/>
        <variable name="del_pvB" public_interface="out" units="J_per_m3"/>
        <variable name="Q_delayB" public_interface="out" units="m3_per_s"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>v_w</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <ci>Q_delayB</ci>
                        <ci>v_w</ci>
                    </apply>
                    <ci>delT</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>Q_delayB</ci>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <ci>u_w</ci>
                        <ci>u_m</ci>
                    </apply>
                    <ci>R_pvb</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>R_pvb</ci>
                <apply>
                    <divide/>
                    <ci>R_pv0</ci>
                    <apply>
                        <times/>
                        <apply>
                            <divide/>
                            <apply>
                                <times/>
                                <cn cellml:units="dimensionless">2</cn>
                                <pi/>
                                <ci>L</ci>
                                <ci>D</ci>
                            </apply>
                            <ci>d_ec</ci>
                        </apply>
                        <apply>
                            <minus/>
                            <apply>
                                <cosh/>
                                <apply>
                                    <times/>
                                    <ci>a</ci>
                                    <ci>del_pvB</ci>
                                </apply>
                            </apply>
                            <cn cellml:units="dimensionless">1</cn>
                        </apply>
                        <apply>
                            <exp/>
                            <apply>
                                <times/>
                                <apply>
                                    <minus/>
                                    <ci>b</ci>
                                </apply>
                                <ci>del_pvB</ci>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>del_pvB</ci>
                <apply>
                    <minus/>
                    <ci>u_w</ci>
                    <ci>u_m</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>R_p</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">64</cn>
                        <ci>mu</ci>
                        <ci>L</ci>
                    </apply>
                    <apply>
                        <times/>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>D</ci>
                            <cn cellml:units="dimensionless">4</cn>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>D</ci>
                <apply>
                    <times/>
                    <cn cellml:units="dimensionless">2</cn>
                    <apply>
                        <root/>
                        <apply>
                            <divide/>
                            <ci>q_m</ci>
                            <apply>
                                <times/>
                                <pi/>
                                <ci>L</ci>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <!-- Conservation Laws-->
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_m</ci>
                </apply>
                <apply>
                    <minus/>
                    <ci>v_w</ci>
                    <ci>v_p</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u_m</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <apply>
                            <minus/>
                            <ci>q_m</ci>
                            <ci>q_0</ci>
                        </apply>
                        <ci>C_L</ci>
                    </apply>
                    <ci>u_w</ci>
                </apply>
            </apply>
            <!---u_af;
 u_af = N*K_af/(pi*D)*(D0/2{dimensionless}-D/2{dimensionless});
*a_f;-->
            <apply>
                <eq/>
                <ci>v_p</ci>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <ci>u_m</ci>
                        <ci>u_out</ci>
                    </apply>
                    <ci>R_p</ci>
                </apply>
            </apply>
        </math>
        <!--v_w = (u_w-u_m)/R_pv;-->
    </component>
    <!--////////////////////////////////////-->
    <component name="Lymph_vessel_mid">
        <!-- Constitutive parameters-->
        <variable name="t" public_interface="in" units="second"/>
        <variable name="delT" public_interface="in" units="second"/>
        <!--var u_ec: J_per_m3 {pub: in};
var f_1: Hz {pub: in};-->
        <variable name="mu" public_interface="in" units="Js_per_m3"/>
        <variable name="L" public_interface="in" units="meter"/>
        <variable name="D" public_interface="out" units="meter"/>
        <!-- var D0: meter {pub: in};-->
        <variable name="q_0" public_interface="in" units="m3"/>
        <variable name="C_L" public_interface="in" units="m6_per_J"/>
        <variable name="R_pvm" public_interface="out" units="Js_per_m6"/>
        <variable name="R_p" public_interface="out" units="Js_per_m6"/>
        <!--var a_f: dimensionless {pub: in};-->
        <variable name="R_sv" public_interface="out" units="Js_per_m6"/>
        <!--State Variables-->
        <variable name="v_p1" public_interface="in" units="m3_per_s"/>
        <variable name="v_p2" public_interface="in" units="m3_per_s"/>
        <variable name="v_p31" public_interface="out" units="m3_per_s"/>
        <variable name="v_p32" public_interface="out" units="m3_per_s"/>
        <!--var q_m: m3 {init: 2e-14, pub: out};-->
        <!--var v1: m3_per_s {pub: in};-->
        <variable initial_value="2e-16" name="v_w" public_interface="out" units="m3_per_s"/>
        <variable name="u_w" public_interface="in" units="J_per_m3"/>
        <variable name="u_m" public_interface="out" units="J_per_m3"/>
        <variable name="u_out" public_interface="in" units="J_per_m3"/>
        <variable initial_value="145" name="u_in" public_interface="out" units="J_per_m3"/>
        <variable name="q_m_init" public_interface="in" units="m3"/>
        <variable initial_value="q_m_init" name="q_m" public_interface="out" units="m3"/>
        <!--var R_svc: js_per_m6 ;-->
        <!-- Constitutive Relations
 var N: dimensionless {pub: in};
var K_af: J_per_m2 {pub: in};
 var u_af: J_per_m3 {pub: out}; -->
        <variable name="a" public_interface="in" units="m3_per_J"/>
        <!--var a: m3_per_J {init: 7.8867e-4};-->
        <variable name="b" public_interface="in" units="m3_per_J"/>
        <variable name="R_pv0_mid" public_interface="in" units="J_per_m4_s"/>
        <variable name="d_ec" public_interface="in" units="meter"/>
        <variable name="del_pvm" public_interface="out" units="J_per_m3"/>
        <variable name="Q_delaypv" public_interface="out" units="m3_per_s"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>v_w</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <ci>Q_delaypv</ci>
                        <ci>v_w</ci>
                    </apply>
                    <ci>delT</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>Q_delaypv</ci>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <ci>u_w</ci>
                        <ci>u_m</ci>
                    </apply>
                    <ci>R_pvm</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>R_pvm</ci>
                <apply>
                    <divide/>
                    <ci>R_pv0_mid</ci>
                    <apply>
                        <times/>
                        <apply>
                            <divide/>
                            <apply>
                                <times/>
                                <cn cellml:units="dimensionless">2</cn>
                                <pi/>
                                <ci>L</ci>
                                <ci>D</ci>
                            </apply>
                            <ci>d_ec</ci>
                        </apply>
                        <apply>
                            <minus/>
                            <apply>
                                <cosh/>
                                <apply>
                                    <times/>
                                    <ci>a</ci>
                                    <ci>del_pvm</ci>
                                </apply>
                            </apply>
                            <cn cellml:units="dimensionless">1</cn>
                        </apply>
                        <apply>
                            <exp/>
                            <apply>
                                <times/>
                                <apply>
                                    <minus/>
                                    <ci>b</ci>
                                </apply>
                                <ci>del_pvm</ci>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>del_pvm</ci>
                <apply>
                    <minus/>
                    <ci>u_w</ci>
                    <ci>u_m</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>u_in</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">2</cn>
                        <apply>
                            <minus/>
                            <apply>
                                <plus/>
                                <ci>v_p1</ci>
                                <ci>v_p2</ci>
                            </apply>
                            <ci>v_p31</ci>
                        </apply>
                    </apply>
                    <ci>C_L</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_m</ci>
                </apply>
                <apply>
                    <plus/>
                    <apply>
                        <minus/>
                        <ci>v_w</ci>
                        <ci>v_p32</ci>
                    </apply>
                    <ci>v_p31</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>R_p</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">64</cn>
                        <ci>mu</ci>
                        <ci>L</ci>
                    </apply>
                    <apply>
                        <times/>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>D</ci>
                            <cn cellml:units="dimensionless">4</cn>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>v_p31</ci>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <ci>u_in</ci>
                        <ci>u_m</ci>
                    </apply>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">0.5</cn>
                        <ci>R_p</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u_m</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <apply>
                            <times/>
                            <cn cellml:units="dimensionless">1</cn>
                            <apply>
                                <minus/>
                                <ci>q_m</ci>
                                <ci>q_0</ci>
                            </apply>
                        </apply>
                        <ci>C_L</ci>
                    </apply>
                    <ci>u_w</ci>
                </apply>
            </apply>
            <!---u_af;
 u_af = N*K_af/(pi*D)*(D0/2{dimensionless}-D/2{dimensionless});-->
            <apply>
                <eq/>
                <ci>v_p32</ci>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <ci>u_m</ci>
                        <ci>u_out</ci>
                    </apply>
                    <apply>
                        <plus/>
                        <apply>
                            <times/>
                            <cn cellml:units="dimensionless">0.5</cn>
                            <ci>R_p</ci>
                        </apply>
                        <ci>R_sv</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>D</ci>
                <apply>
                    <times/>
                    <cn cellml:units="dimensionless">2</cn>
                    <apply>
                        <root/>
                        <apply>
                            <divide/>
                            <ci>q_m</ci>
                            <apply>
                                <times/>
                                <pi/>
                                <ci>L</ci>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <!--u_out = u_ec*98.066{dimensionless}/2{dimensionless}*(3{dimensionless}-cos(2{dimensionless}*pi*f_1*t));-->
            <!--v_w = (u_w-u_m)/R_pv;-->
            <apply>
                <eq/>
                <ci>R_sv</ci>
                <piecewise>
                    <piece>
                        <cn cellml:units="Js_per_m6" type="e-notation">1<sep/>1</cn>
                        <apply>
                            <geq/>
                            <ci>u_m</ci>
                            <ci>u_out</ci>
                        </apply>
                    </piece>
                    <piece>
                        <cn cellml:units="Js_per_m6" type="e-notation">1<sep/>25</cn>
                        <apply>
                            <lt/>
                            <ci>u_m</ci>
                            <ci>u_out</ci>
                        </apply>
                    </piece>
                </piecewise>
            </apply>
        </math>
    </component>
    <!--//////////////////////-->
    <component name="Lymph_vessel_out">
        <!-- Constitutive parameters-->
        <variable name="delT" public_interface="in" units="second"/>
        <variable name="t" public_interface="in" units="second"/>
        <variable name="mu" public_interface="in" units="Js_per_m3"/>
        <variable name="L" public_interface="in" units="meter"/>
        <variable name="D" public_interface="out" units="meter"/>
        <variable name="D_init" public_interface="in" units="meter"/>
        <variable name="q_0" public_interface="in" units="m3"/>
        <variable name="C_L" public_interface="in" units="m6_per_J"/>
        <variable name="N" public_interface="in" units="dimensionless"/>
        <variable name="N2" public_interface="in" units="dimensionless"/>
        <!--var N: dimensionless {pub: in};-->
        <variable name="R_pvo" public_interface="out" units="Js_per_m6"/>
        <variable name="R_p" public_interface="out" units="Js_per_m6"/>
        <variable name="K_af" public_interface="in" units="J_per_m2"/>
        <variable name="u_af" public_interface="out" units="J_per_m3"/>
        <!--var a_f: dimensionless {pub: in};-->
        <variable name="R_sv" public_interface="out" units="Js_per_m6"/>
        <!--State Variables-->
        <variable name="v_p321" public_interface="in" units="m3_per_s"/>
        <variable name="v_p322" public_interface="in" units="m3_per_s"/>
        <variable name="v_p41" public_interface="out" units="m3_per_s"/>
        <variable name="v_p42" public_interface="out" units="m3_per_s"/>
        <!-- var q_m: m3 {init: 2e-12, pub: out};-->
        <!--var v1: m3_per_s {pub: in};
var N: dimensionless {pub: out};
var K_af: J_per_m2 {pub: in};-->
        <variable initial_value="2e-12" name="v_w" public_interface="out" units="m3_per_s"/>
        <variable name="u_w" public_interface="in" units="J_per_m3"/>
        <variable name="u_m" public_interface="out" units="J_per_m3"/>
        <variable name="u_out" public_interface="in" units="J_per_m3"/>
        <variable initial_value="150" name="u_in4" public_interface="out" units="J_per_m3"/>
        <variable name="q_m_init" public_interface="in" units="m3"/>
        <variable initial_value="q_m_init" name="q_m" public_interface="out" units="m3"/>
        <!--var R_svc: js_per_m6 ;-->
        <variable name="a" public_interface="in" units="m3_per_J"/>
        <!--var a: m3_per_J {init: 7.8867e-4};-->
        <variable name="b" public_interface="in" units="m3_per_J"/>
        <variable name="R_pv0_out" public_interface="in" units="J_per_m4_s"/>
        <variable name="d_ec" public_interface="in" units="meter"/>
        <!-- Constitutive Relations-->
        <variable name="del_pvO" public_interface="out" units="J_per_m3"/>
        <variable name="Q_delayO" public_interface="out" units="m3_per_s"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>v_w</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <ci>Q_delayO</ci>
                        <ci>v_w</ci>
                    </apply>
                    <ci>delT</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>Q_delayO</ci>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <ci>u_w</ci>
                        <ci>u_m</ci>
                    </apply>
                    <ci>R_pvo</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>R_pvo</ci>
                <apply>
                    <divide/>
                    <ci>R_pv0_out</ci>
                    <apply>
                        <times/>
                        <apply>
                            <divide/>
                            <apply>
                                <times/>
                                <cn cellml:units="dimensionless">2</cn>
                                <pi/>
                                <ci>L</ci>
                                <ci>D</ci>
                            </apply>
                            <ci>d_ec</ci>
                        </apply>
                        <apply>
                            <minus/>
                            <apply>
                                <cosh/>
                                <apply>
                                    <times/>
                                    <ci>a</ci>
                                    <ci>del_pvO</ci>
                                </apply>
                            </apply>
                            <cn cellml:units="dimensionless">1</cn>
                        </apply>
                        <apply>
                            <exp/>
                            <apply>
                                <times/>
                                <apply>
                                    <minus/>
                                    <ci>b</ci>
                                </apply>
                                <ci>del_pvO</ci>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>del_pvO</ci>
                <apply>
                    <minus/>
                    <ci>u_w</ci>
                    <ci>u_m</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>u_in4</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">2</cn>
                        <apply>
                            <minus/>
                            <apply>
                                <plus/>
                                <ci>v_p321</ci>
                                <ci>v_p322</ci>
                            </apply>
                            <ci>v_p41</ci>
                        </apply>
                    </apply>
                    <ci>C_L</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_m</ci>
                </apply>
                <apply>
                    <plus/>
                    <apply>
                        <minus/>
                        <ci>v_w</ci>
                        <ci>v_p42</ci>
                    </apply>
                    <ci>v_p41</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>R_p</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">64</cn>
                        <ci>mu</ci>
                        <ci>L</ci>
                    </apply>
                    <apply>
                        <times/>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>D</ci>
                            <cn cellml:units="dimensionless">4</cn>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>v_p41</ci>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <ci>u_in4</ci>
                        <ci>u_m</ci>
                    </apply>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">0.5</cn>
                        <ci>R_p</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u_m</ci>
                <apply>
                    <minus/>
                    <apply>
                        <plus/>
                        <apply>
                            <divide/>
                            <apply>
                                <times/>
                                <cn cellml:units="dimensionless">2</cn>
                                <apply>
                                    <minus/>
                                    <ci>q_m</ci>
                                    <ci>q_0</ci>
                                </apply>
                            </apply>
                            <ci>C_L</ci>
                        </apply>
                        <ci>u_w</ci>
                    </apply>
                    <ci>u_af</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u_af</ci>
                <apply>
                    <times/>
                    <ci>N</ci>
                    <ci>K_af</ci>
                    <ci>N2</ci>
                    <ci>D_init</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>v_p42</ci>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <ci>u_m</ci>
                        <ci>u_out</ci>
                    </apply>
                    <apply>
                        <plus/>
                        <apply>
                            <times/>
                            <cn cellml:units="dimensionless">0.5</cn>
                            <ci>R_p</ci>
                        </apply>
                        <ci>R_sv</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>D</ci>
                <apply>
                    <times/>
                    <cn cellml:units="dimensionless">2</cn>
                    <apply>
                        <root/>
                        <apply>
                            <divide/>
                            <ci>q_m</ci>
                            <apply>
                                <times/>
                                <pi/>
                                <ci>L</ci>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <!--u_out = u_ec*98.066{dimensionless}/2{dimensionless}*(3{dimensionless}-cos(2{dimensionless}*pi*f_1*t));-->
            <!--v_w = (u_w-u_m)/R_pv;-->
            <!--R_pvo = sel
 case u_w >= u_m:
    1000{dimensionless}/(2{dimensionless}*pi*L*D/d_ec*(cosh(a*del_pvO)-1{dimensionless})*exp(-b*del_pvO));
 otherwise:
       1e25{Js_per_m6};
endsel;-->
            <apply>
                <eq/>
                <ci>R_sv</ci>
                <piecewise>
                    <piece>
                        <cn cellml:units="Js_per_m6" type="e-notation">1<sep/>0</cn>
                        <apply>
                            <geq/>
                            <ci>u_m</ci>
                            <ci>u_out</ci>
                        </apply>
                    </piece>
                    <piece>
                        <cn cellml:units="Js_per_m6" type="e-notation">1<sep/>25</cn>
                        <apply>
                            <lt/>
                            <ci>u_m</ci>
                            <ci>u_out</ci>
                        </apply>
                    </piece>
                </piecewise>
            </apply>
        </math>
    </component>
    <!--//////////////////////////////////////////////////////////////////////-->
    <component name="intersttitial_space">
        <variable name="t" public_interface="in" units="second"/>
        <variable name="u_ec" public_interface="in" units="J_per_m3"/>
        <variable name="f_1" public_interface="in" units="Hz"/>
        <variable name="f_2" public_interface="in" units="Hz"/>
        <!--var t_01: second {pub: in};-->
        <variable name="mu" public_interface="in" units="Js_per_m3"/>
        <variable name="r" public_interface="in" units="meter"/>
        <variable name="D" public_interface="in" units="meter"/>
        <!--var P_e: dyn_per_cm2 {init: 2100};           -->
        <variable name="K" public_interface="in" units="m2"/>
        <variable name="R_I" public_interface="out" units="Js_per_m6"/>
        <!--var u_in1: J_per_m3 {init: 150};-->
        <variable name="u_e" public_interface="out" units="J_per_m3"/>
        <variable name="v_wI" public_interface="in" units="m3_per_s"/>
        <variable name="v_I" public_interface="out" units="m3_per_s"/>
        <variable name="C_I" public_interface="in" units="m6_per_J"/>
        <!--{init: 6.0015e-15};-->
        <variable initial_value="150" name="u_wI" public_interface="out" units="J_per_m3"/>
        <variable name="L" public_interface="in" units="meter"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>R_I</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <ci>mu</ci>
                        <apply>
                            <ln/>
                            <apply>
                                <divide/>
                                <apply>
                                    <plus/>
                                    <apply>
                                        <times/>
                                        <cn cellml:units="dimensionless">2</cn>
                                        <ci>r</ci>
                                    </apply>
                                    <ci>D</ci>
                                </apply>
                                <ci>D</ci>
                            </apply>
                        </apply>
                    </apply>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">2</cn>
                        <pi/>
                        <ci>L</ci>
                        <ci>K</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u_e</ci>
                <apply>
                    <times/>
                    <apply>
                        <divide/>
                        <apply>
                            <times/>
                            <ci>u_ec</ci>
                            <cn cellml:units="dimensionless">98.066</cn>
                        </apply>
                        <cn cellml:units="dimensionless">2</cn>
                    </apply>
                    <apply>
                        <minus/>
                        <cn cellml:units="dimensionless">3</cn>
                        <apply>
                            <cos/>
                            <apply>
                                <times/>
                                <cn cellml:units="dimensionless">2</cn>
                                <pi/>
                                <ci>f_1</ci>
                                <ci>t</ci>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <!--mu*ln((2{dimensionless}*r+D)/D)/(2{dimensionless}*pi*L*K);-->
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>u_wI</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <ci>v_I</ci>
                        <ci>v_wI</ci>
                    </apply>
                    <ci>C_I</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>v_I</ci>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <ci>u_e</ci>
                        <ci>u_wI</ci>
                    </apply>
                    <ci>R_I</ci>
                </apply>
            </apply>
        </math>
    </component>
    <component name="vp_nonlinear_lymphatic_type">
        <variable name="t" public_interface="in" units="second"/>
        <!-- Constitutive parameters-->
        <variable name="mu" public_interface="in" units="Js_per_m3"/>
        <variable name="rho" public_interface="in" units="Js2_per_m5"/>
        <variable name="g" public_interface="in" units="m_per_s2"/>
        <variable name="beta_g" public_interface="in" units="dimensionless"/>
        <variable name="theta" public_interface="in" units="dimensionless"/>
        <variable name="l" public_interface="in" units="metre"/>
        <variable name="r" public_interface="out" units="metre"/>
        <variable name="r_us" public_interface="in" units="metre"/>
        <variable name="I" public_interface="out" units="Js2_per_m6"/>
        <variable name="R" public_interface="out" units="Js_per_m6"/>
        <variable name="m_tube" public_interface="in" units="dimensionless"/>
        <variable name="n_tube" public_interface="in" units="dimensionless"/>
        <!-- State Variables-->
        <variable name="u_ext" public_interface="in" units="J_per_m3"/>
        <variable name="v_in" public_interface="in" units="m3_per_s"/>
        <variable name="u" public_interface="out" units="J_per_m3"/>
        <variable initial_value="0.0" name="v" public_interface="out" units="m3_per_s"/>
        <variable name="u_out" public_interface="in" units="J_per_m3"/>
        <variable initial_value="0.0" name="q_C" public_interface="out" units="m3"/>
        <variable name="K_tube" public_interface="in" units="J_per_m3"/>
        <variable name="q_total" public_interface="out" units="m3"/>
        <variable name="q_us" public_interface="out" units="m3"/>
        <variable name="R_flag" public_interface="in" units="dimensionless"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>q_us</ci>
                <apply>
                    <times/>
                    <pi/>
                    <apply>
                        <power/>
                        <ci>r_us</ci>
                        <cn cellml:units="dimensionless">2</cn>
                    </apply>
                    <ci>l</ci>
                </apply>
            </apply>
            <!-- Constitutive Relations-->
            <apply>
                <eq/>
                <ci>I</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <ci>rho</ci>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">2</cn>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>R</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">8</cn>
                        <ci>mu</ci>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">4</cn>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <!-- Conservation Laws-->
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>v</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <minus/>
                            <apply>
                                <minus/>
                                <ci>u</ci>
                                <ci>u_out</ci>
                            </apply>
                            <apply>
                                <times/>
                                <ci>R_flag</ci>
                                <ci>R</ci>
                                <ci>v</ci>
                            </apply>
                        </apply>
                        <apply>
                            <times/>
                            <ci>beta_g</ci>
                            <ci>rho</ci>
                            <ci>g</ci>
                            <ci>l</ci>
                            <apply>
                                <cos/>
                                <apply>
                                    <divide/>
                                    <apply>
                                        <times/>
                                        <ci>theta</ci>
                                        <pi/>
                                    </apply>
                                    <cn cellml:units="dimensionless">180</cn>
                                </apply>
                            </apply>
                        </apply>
                    </apply>
                    <ci>I</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_C</ci>
                </apply>
                <apply>
                    <minus/>
                    <ci>v_in</ci>
                    <ci>v</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>q_total</ci>
                <apply>
                    <plus/>
                    <ci>q_C</ci>
                    <ci>q_us</ci>
                </apply>
            </apply>
            <!-- calculated radius-->
            <apply>
                <eq/>
                <ci>r</ci>
                <apply>
                    <root/>
                    <apply>
                        <divide/>
                        <ci>q_total</ci>
                        <apply>
                            <times/>
                            <pi/>
                            <ci>l</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <!-- Nonlinear tube law.-->
            <apply>
                <eq/>
                <ci>u</ci>
                <apply>
                    <plus/>
                    <apply>
                        <times/>
                        <ci>K_tube</ci>
                        <apply>
                            <minus/>
                            <apply>
                                <power/>
                                <apply>
                                    <divide/>
                                    <ci>q_total</ci>
                                    <ci>q_us</ci>
                                </apply>
                                <ci>m_tube</ci>
                            </apply>
                            <apply>
                                <power/>
                                <apply>
                                    <divide/>
                                    <ci>q_total</ci>
                                    <ci>q_us</ci>
                                </apply>
                                <ci>n_tube</ci>
                            </apply>
                        </apply>
                    </apply>
                    <ci>u_ext</ci>
                </apply>
            </apply>
        </math>
    </component>
    <component name="pv_nonlinear_lymphatic_type">
        <variable name="t" public_interface="in" units="second"/>
        <!-- Constitutive parameters-->
        <variable name="mu" public_interface="in" units="Js_per_m3"/>
        <variable name="rho" public_interface="in" units="Js2_per_m5"/>
        <variable name="g" public_interface="in" units="m_per_s2"/>
        <variable name="beta_g" public_interface="in" units="dimensionless"/>
        <variable name="theta" public_interface="in" units="dimensionless"/>
        <variable name="l" public_interface="in" units="metre"/>
        <variable name="r" public_interface="out" units="metre"/>
        <variable name="r_us" public_interface="in" units="metre"/>
        <variable name="I" public_interface="out" units="Js2_per_m6"/>
        <variable name="R" public_interface="out" units="Js_per_m6"/>
        <variable name="m_tube" public_interface="in" units="dimensionless"/>
        <variable name="n_tube" public_interface="in" units="dimensionless"/>
        <!-- State Variables-->
        <variable name="u_ext" public_interface="in" units="J_per_m3"/>
        <variable name="u_in" public_interface="in" units="J_per_m3"/>
        <variable initial_value="0.0" name="v" public_interface="out" units="m3_per_s"/>
        <variable name="u" public_interface="out" units="J_per_m3"/>
        <variable name="v_out" public_interface="in" units="m3_per_s"/>
        <variable initial_value="0.0" name="q_C" public_interface="out" units="m3"/>
        <variable name="K_tube" public_interface="in" units="J_per_m3"/>
        <variable name="q_total" public_interface="out" units="m3"/>
        <variable name="q_us" public_interface="out" units="m3"/>
        <variable name="R_flag" public_interface="in" units="dimensionless"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>q_us</ci>
                <apply>
                    <times/>
                    <pi/>
                    <apply>
                        <power/>
                        <ci>r_us</ci>
                        <cn cellml:units="dimensionless">2</cn>
                    </apply>
                    <ci>l</ci>
                </apply>
            </apply>
            <!-- Constitutive Relations-->
            <apply>
                <eq/>
                <ci>I</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <ci>rho</ci>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">2</cn>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>R</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">8</cn>
                        <ci>mu</ci>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">4</cn>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <!-- Conservation Laws-->
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>v</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <minus/>
                            <apply>
                                <minus/>
                                <ci>u_in</ci>
                                <ci>u</ci>
                            </apply>
                            <apply>
                                <times/>
                                <ci>R_flag</ci>
                                <ci>R</ci>
                                <ci>v</ci>
                            </apply>
                        </apply>
                        <apply>
                            <times/>
                            <ci>beta_g</ci>
                            <ci>rho</ci>
                            <ci>g</ci>
                            <ci>l</ci>
                            <apply>
                                <cos/>
                                <apply>
                                    <divide/>
                                    <apply>
                                        <times/>
                                        <ci>theta</ci>
                                        <pi/>
                                    </apply>
                                    <cn cellml:units="dimensionless">180</cn>
                                </apply>
                            </apply>
                        </apply>
                    </apply>
                    <ci>I</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_C</ci>
                </apply>
                <apply>
                    <minus/>
                    <ci>v</ci>
                    <ci>v_out</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>q_total</ci>
                <apply>
                    <plus/>
                    <ci>q_C</ci>
                    <ci>q_us</ci>
                </apply>
            </apply>
            <!-- calculated radius-->
            <apply>
                <eq/>
                <ci>r</ci>
                <apply>
                    <root/>
                    <apply>
                        <divide/>
                        <ci>q_total</ci>
                        <apply>
                            <times/>
                            <pi/>
                            <ci>l</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <!-- Nonlinear tube law.-->
            <apply>
                <eq/>
                <ci>u</ci>
                <apply>
                    <plus/>
                    <apply>
                        <times/>
                        <ci>K_tube</ci>
                        <apply>
                            <minus/>
                            <apply>
                                <power/>
                                <apply>
                                    <divide/>
                                    <ci>q_total</ci>
                                    <ci>q_us</ci>
                                </apply>
                                <ci>m_tube</ci>
                            </apply>
                            <apply>
                                <power/>
                                <apply>
                                    <divide/>
                                    <ci>q_total</ci>
                                    <ci>q_us</ci>
                                </apply>
                                <ci>n_tube</ci>
                            </apply>
                        </apply>
                    </apply>
                    <ci>u_ext</ci>
                </apply>
            </apply>
        </math>
    </component>
    <component name="K_mod_fitz_hugh_nagumo">
        <variable name="t" public_interface="in" units="second"/>
        <!-- constants and algebraic variables-->
        <variable name="t_excited" public_interface="in" units="second"/>
        <variable name="f_min" public_interface="in" units="per_s"/>
        <variable name="f_Ca" public_interface="in" units="per_s"/>
        <variable name="I_mean" public_interface="out" units="dimensionless"/>
        <variable name="R_I" public_interface="in" units="dimensionless"/>
        <variable name="n_Ca" public_interface="in" units="dimensionless"/>
        <variable name="lambda_Ca" public_interface="in" units="dimensionless"/>
        <variable name="k1_Ca" public_interface="out" units="per_s"/>
        <variable name="k2_Ca" public_interface="out" units="per_s"/>
        <variable name="k_rel" public_interface="in" units="per_s"/>
        <variable name="a_1" public_interface="in" units="per_s"/>
        <variable name="a_2" public_interface="in" units="dimensionless"/>
        <variable name="a_3" public_interface="in" units="dimensionless"/>
        <variable name="b_1" public_interface="in" units="per_s"/>
        <variable name="b_2" public_interface="in" units="per_s"/>
        <variable name="c_1" public_interface="in" units="per_s"/>
        <variable name="c_2" public_interface="in" units="per_s"/>
        <variable name="k_NO" public_interface="in" units="dimensionless"/>
        <variable name="tau_NO" public_interface="in" units="pascal"/>
        <variable name="n_NO" public_interface="in" units="dimensionless"/>
        <variable name="f_I" public_interface="out" units="per_s"/>
        <variable name="f_NO" public_interface="out" units="per_s"/>
        <variable name="f_s" public_interface="out" units="per_s"/>
        <variable name="mu" public_interface="in" units="Js_per_m3"/>
        <!-- variables from vessel model-->
        <variable name="flow" public_interface="in" units="m3_per_s"/>
        <variable name="r" public_interface="in" units="metre"/>
        <variable name="r_us" public_interface="in" units="metre"/>
        <!-- derived variables from vessel model;-->
        <variable name="tau" public_interface="out" units="pascal"/>
        <variable name="lambda_theta" public_interface="out" units="dimensionless"/>
        <!-- vessel stiffness variables-->
        <variable name="K_min" public_interface="in" units="pascal"/>
        <variable name="K_max" public_interface="in" units="pascal"/>
        <variable name="K" public_interface="out" units="pascal"/>
        <!-- state variables-->
        <variable initial_value="v_init" name="v" public_interface="out" units="dimensionless"/>
        <variable initial_value="w_init" name="w" public_interface="out" units="dimensionless"/>
        <variable initial_value="I_init" name="I" public_interface="out" units="dimensionless"/>
        <variable initial_value="s_init" name="s" public_interface="out" units="dimensionless"/>
        <variable name="v_init" public_interface="in" units="dimensionless"/>
        <variable name="w_init" public_interface="in" units="dimensionless"/>
        <variable name="I_init" public_interface="in" units="dimensionless"/>
        <variable name="s_init" public_interface="in" units="dimensionless"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>v</ci>
                </apply>
                <apply>
                    <times/>
                    <ci>a_1</ci>
                    <apply>
                        <plus/>
                        <apply>
                            <minus/>
                            <apply>
                                <times/>
                                <ci>v</ci>
                                <apply>
                                    <minus/>
                                    <ci>v</ci>
                                    <ci>a_2</ci>
                                </apply>
                                <apply>
                                    <minus/>
                                    <cn cellml:units="dimensionless">1</cn>
                                    <apply>
                                        <times/>
                                        <ci>a_3</ci>
                                        <ci>v</ci>
                                    </apply>
                                </apply>
                            </apply>
                            <ci>w</ci>
                        </apply>
                        <apply>
                            <times/>
                            <ci>v</ci>
                            <ci>I</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>w</ci>
                </apply>
                <apply>
                    <minus/>
                    <apply>
                        <times/>
                        <ci>b_1</ci>
                        <ci>v</ci>
                        <apply>
                            <power/>
                            <apply>
                                <minus/>
                                <cn cellml:units="dimensionless">1</cn>
                                <ci>v</ci>
                            </apply>
                            <cn cellml:units="dimensionless">2</cn>
                        </apply>
                    </apply>
                    <apply>
                        <times/>
                        <ci>b_2</ci>
                        <ci>w</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>I</ci>
                </apply>
                <ci>f_I</ci>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>s</ci>
                </apply>
                <ci>f_s</ci>
            </apply>
            <!-- calculations for f variables-->
            <apply>
                <eq/>
                <ci>I_mean</ci>
                <apply>
                    <plus/>
                    <ci>a_2</ci>
                    <apply>
                        <root/>
                        <apply>
                            <divide/>
                            <ci>b_1</ci>
                            <ci>a_1</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>k1_Ca</ci>
                <apply>
                    <divide/>
                    <ci>I_mean</ci>
                    <apply>
                        <minus/>
                        <apply>
                            <divide/>
                            <cn cellml:units="dimensionless">1</cn>
                            <ci>f_min</ci>
                        </apply>
                        <ci>t_excited</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>k2_Ca</ci>
                <apply>
                    <minus/>
                    <apply>
                        <divide/>
                        <ci>I_mean</ci>
                        <apply>
                            <minus/>
                            <apply>
                                <divide/>
                                <cn cellml:units="dimensionless">1</cn>
                                <ci>f_Ca</ci>
                            </apply>
                            <ci>t_excited</ci>
                        </apply>
                    </apply>
                    <apply>
                        <divide/>
                        <ci>I_mean</ci>
                        <apply>
                            <minus/>
                            <apply>
                                <divide/>
                                <cn cellml:units="dimensionless">1</cn>
                                <ci>f_min</ci>
                            </apply>
                            <ci>t_excited</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>f_I</ci>
                <piecewise>
                    <piece>
                        <apply>
                            <times/>
                            <apply>
                                <plus/>
                                <ci>k1_Ca</ci>
                                <apply>
                                    <times/>
                                    <ci>k2_Ca</ci>
                                    <apply>
                                        <power/>
                                        <apply>
                                            <divide/>
                                            <ci>lambda_theta</ci>
                                            <ci>lambda_Ca</ci>
                                        </apply>
                                        <ci>n_Ca</ci>
                                    </apply>
                                </apply>
                            </apply>
                            <ci>f_NO</ci>
                        </apply>
                        <apply>
                            <leq/>
                            <apply>
                                <root/>
                                <apply>
                                    <plus/>
                                    <apply>
                                        <power/>
                                        <ci>v</ci>
                                        <cn cellml:units="dimensionless">2</cn>
                                    </apply>
                                    <apply>
                                        <power/>
                                        <ci>w</ci>
                                        <cn cellml:units="dimensionless">2</cn>
                                    </apply>
                                </apply>
                            </apply>
                            <ci>R_I</ci>
                        </apply>
                    </piece>
                    <otherwise>
                        <apply>
                            <times/>
                            <apply>
                                <minus/>
                                <ci>I</ci>
                            </apply>
                            <ci>k_rel</ci>
                        </apply>
                    </otherwise>
                </piecewise>
            </apply>
            <apply>
                <eq/>
                <ci>f_NO</ci>
                <apply>
                    <minus/>
                    <cn cellml:units="dimensionless">1</cn>
                    <apply>
                        <times/>
                        <ci>k_NO</ci>
                        <apply>
                            <minus/>
                            <apply>
                                <divide/>
                                <cn cellml:units="dimensionless">2</cn>
                                <apply>
                                    <plus/>
                                    <cn cellml:units="dimensionless">1</cn>
                                    <apply>
                                        <exp/>
                                        <apply>
                                            <minus/>
                                            <apply>
                                                <power/>
                                                <apply>
                                                    <abs/>
                                                    <apply>
                                                        <divide/>
                                                        <ci>tau</ci>
                                                        <ci>tau_NO</ci>
                                                    </apply>
                                                </apply>
                                                <ci>n_NO</ci>
                                            </apply>
                                        </apply>
                                    </apply>
                                </apply>
                            </apply>
                            <cn cellml:units="dimensionless">1</cn>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>f_s</ci>
                <piecewise>
                    <piece>
                        <apply>
                            <times/>
                            <ci>c_1</ci>
                            <ci>v</ci>
                            <apply>
                                <minus/>
                                <cn cellml:units="dimensionless">1</cn>
                                <ci>s</ci>
                            </apply>
                        </apply>
                        <apply>
                            <gt/>
                            <ci>v</ci>
                            <cn cellml:units="dimensionless">0</cn>
                        </apply>
                    </piece>
                    <otherwise>
                        <apply>
                            <times/>
                            <apply>
                                <minus/>
                                <ci>c_2</ci>
                            </apply>
                            <ci>s</ci>
                        </apply>
                    </otherwise>
                </piecewise>
            </apply>
            <apply>
                <eq/>
                <ci>lambda_theta</ci>
                <apply>
                    <divide/>
                    <ci>r</ci>
                    <ci>r_us</ci>
                </apply>
            </apply>
            <!-- equation for shear stress derived-->
            <apply>
                <eq/>
                <ci>tau</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">4</cn>
                        <ci>mu</ci>
                        <ci>flow</ci>
                    </apply>
                    <apply>
                        <times/>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">3</cn>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <!-- K modification part-->
            <apply>
                <eq/>
                <ci>K</ci>
                <apply>
                    <plus/>
                    <ci>K_min</ci>
                    <apply>
                        <times/>
                        <ci>s</ci>
                        <apply>
                            <minus/>
                            <ci>K_max</ci>
                            <ci>K_min</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
        </math>
    </component>
    <component name="vv_nonlinear_lymphatic_type">
        <variable name="t" public_interface="in" units="second"/>
        <!-- Constitutive parameters-->
        <variable name="mu" public_interface="in" units="Js_per_m3"/>
        <variable name="rho" public_interface="in" units="Js2_per_m5"/>
        <variable name="g" public_interface="in" units="m_per_s2"/>
        <variable name="beta_g" public_interface="in" units="dimensionless"/>
        <variable name="theta" public_interface="in" units="dimensionless"/>
        <variable name="l" public_interface="in" units="metre"/>
        <variable name="r" public_interface="out" units="metre"/>
        <variable name="r_us" public_interface="in" units="metre"/>
        <variable name="I" public_interface="out" units="Js2_per_m6"/>
        <variable name="m_tube" public_interface="in" units="dimensionless"/>
        <variable name="n_tube" public_interface="in" units="dimensionless"/>
        <variable name="K_tube" public_interface="in" units="J_per_m3"/>
        <variable name="R" public_interface="out" units="Js_per_m6"/>
        <!-- State Variables-->
        <variable name="u_ext" public_interface="in" units="J_per_m3"/>
        <variable name="v_in" public_interface="in" units="m3_per_s"/>
        <variable name="u" public_interface="out" units="J_per_m3"/>
        <!-- var u_C: J_per_m3 {pub: out};-->
        <variable initial_value="0.0" name="v" public_interface="out" units="m3_per_s"/>
        <variable name="u_d" public_interface="out" units="J_per_m3"/>
        <!-- var u_C_d: J_per_m3 {pub: out};-->
        <variable name="v_out" public_interface="in" units="m3_per_s"/>
        <variable initial_value="0.0" name="q_C" public_interface="out" units="m3"/>
        <variable initial_value="0.0" name="q_C_d" public_interface="out" units="m3"/>
        <variable name="q_half_total" public_interface="out" units="m3"/>
        <variable name="q_half_total_d" public_interface="out" units="m3"/>
        <variable name="q_total" public_interface="out" units="m3"/>
        <variable name="q_us" public_interface="out" units="m3"/>
        <variable name="q_half_us" public_interface="out" units="m3"/>
        <!-- Constitutive Relations-->
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>I</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <ci>rho</ci>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">2</cn>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>R</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">8</cn>
                        <ci>mu</ci>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">4</cn>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <!-- R_v = 0.01{second}/C;-->
            <apply>
                <eq/>
                <ci>q_us</ci>
                <apply>
                    <times/>
                    <pi/>
                    <apply>
                        <power/>
                        <ci>r_us</ci>
                        <cn cellml:units="dimensionless">2</cn>
                    </apply>
                    <ci>l</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>q_half_us</ci>
                <apply>
                    <divide/>
                    <ci>q_us</ci>
                    <cn cellml:units="dimensionless">2</cn>
                </apply>
            </apply>
            <!-- Conservation Laws-->
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>v</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <minus/>
                            <apply>
                                <minus/>
                                <ci>u</ci>
                                <ci>u_d</ci>
                            </apply>
                            <apply>
                                <times/>
                                <ci>R</ci>
                                <ci>v</ci>
                            </apply>
                        </apply>
                        <apply>
                            <times/>
                            <ci>beta_g</ci>
                            <ci>rho</ci>
                            <ci>g</ci>
                            <ci>l</ci>
                            <apply>
                                <cos/>
                                <apply>
                                    <divide/>
                                    <apply>
                                        <times/>
                                        <ci>theta</ci>
                                        <pi/>
                                    </apply>
                                    <cn cellml:units="dimensionless">180</cn>
                                </apply>
                            </apply>
                        </apply>
                    </apply>
                    <ci>I</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_C</ci>
                </apply>
                <apply>
                    <minus/>
                    <ci>v_in</ci>
                    <ci>v</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>q_half_total</ci>
                <apply>
                    <plus/>
                    <ci>q_C</ci>
                    <ci>q_half_us</ci>
                </apply>
            </apply>
            <!-- u_C           = q_C/(C/2{dimensionless})+u_ext;-->
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_C_d</ci>
                </apply>
                <apply>
                    <minus/>
                    <ci>v</ci>
                    <ci>v_out</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>q_half_total_d</ci>
                <apply>
                    <plus/>
                    <ci>q_C_d</ci>
                    <ci>q_half_us</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>q_total</ci>
                <apply>
                    <plus/>
                    <ci>q_half_total</ci>
                    <ci>q_half_total_d</ci>
                </apply>
            </apply>
            <!-- calculated radius-->
            <apply>
                <eq/>
                <ci>r</ci>
                <apply>
                    <root/>
                    <apply>
                        <divide/>
                        <ci>q_total</ci>
                        <apply>
                            <times/>
                            <pi/>
                            <ci>l</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <!-- u_C_d         = q_C_d/(C/2{dimensionless})+u_ext;
 u             = u_C+2{dimensionless}*R_v*(v_in-v);
 u_d           = u_C_d+2{dimensionless}*R_v*(v-v_out);
 TODO include the third term in the tube law.-->
            <apply>
                <eq/>
                <ci>u</ci>
                <apply>
                    <plus/>
                    <apply>
                        <times/>
                        <ci>K_tube</ci>
                        <apply>
                            <minus/>
                            <apply>
                                <power/>
                                <apply>
                                    <divide/>
                                    <ci>q_half_total</ci>
                                    <ci>q_half_us</ci>
                                </apply>
                                <ci>m_tube</ci>
                            </apply>
                            <apply>
                                <power/>
                                <apply>
                                    <divide/>
                                    <ci>q_half_total</ci>
                                    <ci>q_half_us</ci>
                                </apply>
                                <ci>n_tube</ci>
                            </apply>
                        </apply>
                    </apply>
                    <ci>u_ext</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u_d</ci>
                <apply>
                    <plus/>
                    <apply>
                        <times/>
                        <ci>K_tube</ci>
                        <apply>
                            <minus/>
                            <apply>
                                <power/>
                                <apply>
                                    <divide/>
                                    <ci>q_half_total_d</ci>
                                    <ci>q_half_us</ci>
                                </apply>
                                <ci>m_tube</ci>
                            </apply>
                            <apply>
                                <power/>
                                <apply>
                                    <divide/>
                                    <ci>q_half_total_d</ci>
                                    <ci>q_half_us</ci>
                                </apply>
                                <ci>n_tube</ci>
                            </apply>
                        </apply>
                    </apply>
                    <ci>u_ext</ci>
                </apply>
            </apply>
        </math>
    </component>
    <component name="pp_valve_type">
        <variable name="t" public_interface="in" units="second"/>
        <variable initial_value="0" name="v" public_interface="out" units="m3_per_s"/>
        <variable name="L" public_interface="out" units="Js2_per_m6"/>
        <variable name="A_eff" public_interface="out" units="m2"/>
        <variable name="A_nn" public_interface="in" units="m2"/>
        <variable name="K_vo" public_interface="in" units="m3_per_Js"/>
        <variable name="K_vc" public_interface="in" units="m3_per_Js"/>
        <variable name="M_rg" public_interface="in" units="dimensionless"/>
        <variable name="M_st" public_interface="in" units="dimensionless"/>
        <variable name="rho" public_interface="in" units="Js2_per_m5"/>
        <variable name="B" public_interface="out" units="Js2_per_m9"/>
        <variable name="zeta" public_interface="out" units="dimensionless"/>
        <variable initial_value="0" name="zeta_pre" public_interface="out" units="dimensionless"/>
        <variable name="u_in" public_interface="in" units="J_per_m3"/>
        <variable name="u_out" public_interface="in" units="J_per_m3"/>
        <variable name="l_eff" public_interface="in" units="metre"/>
        <variable initial_value="1e-14" name="eps_m4" units="m4"/>
        <variable initial_value="1e-14" name="eps_m2" units="m2"/>
        <!-- Valve model-->
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>B</ci>
                <apply>
                    <divide/>
                    <ci>rho</ci>
                    <apply>
                        <plus/>
                        <apply>
                            <times/>
                            <cn cellml:units="dimensionless">2</cn>
                            <apply>
                                <power/>
                                <ci>A_eff</ci>
                                <cn cellml:units="dimensionless">2</cn>
                            </apply>
                        </apply>
                        <ci>eps_m4</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>L</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <ci>rho</ci>
                        <ci>l_eff</ci>
                    </apply>
                    <apply>
                        <plus/>
                        <ci>A_eff</ci>
                        <ci>eps_m2</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>A_eff</ci>
                <apply>
                    <plus/>
                    <apply>
                        <times/>
                        <apply>
                            <minus/>
                            <apply>
                                <times/>
                                <ci>M_st</ci>
                                <ci>A_nn</ci>
                            </apply>
                            <apply>
                                <times/>
                                <ci>M_rg</ci>
                                <ci>A_nn</ci>
                            </apply>
                        </apply>
                        <ci>zeta</ci>
                    </apply>
                    <apply>
                        <times/>
                        <ci>M_rg</ci>
                        <ci>A_nn</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>zeta_pre</ci>
                </apply>
                <piecewise>
                    <piece>
                        <apply>
                            <times/>
                            <apply>
                                <minus/>
                                <cn cellml:units="dimensionless">1</cn>
                                <ci>zeta_pre</ci>
                            </apply>
                            <ci>K_vo</ci>
                            <apply>
                                <minus/>
                                <ci>u_in</ci>
                                <ci>u_out</ci>
                            </apply>
                        </apply>
                        <apply>
                            <geq/>
                            <ci>u_in</ci>
                            <ci>u_out</ci>
                        </apply>
                    </piece>
                    <otherwise>
                        <apply>
                            <times/>
                            <ci>zeta_pre</ci>
                            <ci>K_vc</ci>
                            <apply>
                                <minus/>
                                <ci>u_in</ci>
                                <ci>u_out</ci>
                            </apply>
                        </apply>
                    </otherwise>
                </piecewise>
            </apply>
            <!-- The below ensures zeta can't be negative-->
            <apply>
                <eq/>
                <ci>zeta</ci>
                <apply>
                    <max/>
                    <ci>zeta_pre</ci>
                    <cn cellml:units="dimensionless">0</cn>
                </apply>
            </apply>
            <!-- calculate the flow through the valves-->
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>v</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <plus/>
                            <apply>
                                <times/>
                                <apply>
                                    <minus/>
                                    <ci>B</ci>
                                </apply>
                                <ci>v</ci>
                                <apply>
                                    <abs/>
                                    <ci>v</ci>
                                </apply>
                            </apply>
                            <ci>u_in</ci>
                        </apply>
                        <ci>u_out</ci>
                    </apply>
                    <ci>L</ci>
                </apply>
            </apply>
        </math>
    </component>
</model>
